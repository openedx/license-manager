language: python
python:
- 3.6

env:
- TOXENV=django22

sudo: false

cache: pip

before_install:
- export DISPLAY=:99.0

install:
- make ci_requirements
- pip install -U pip wheel codecov

script:
- make validate_translations
- make validate

after_success:
- codecov

deploy:
  provider: script
  script: make docker_push
  on:
    branch: master
